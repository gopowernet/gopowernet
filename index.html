<!DOCTYPE html>
<html lang="ko">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width,initial-scale=1" />
Â  <title>Powernet Q&A ì±—ë´‡</title>
Â  <style>
Â  Â  *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,sans-serif;background:#f6f8fb;color:#111}
Â  Â  header{background:#0d47a1;color:#fff;padding:18px 16px;font-weight:700}
Â  Â  .container{max-width:900px;margin:24px auto;padding:0 16px}
Â  Â  .hero{background:#e3f2fd;border:1px solid #bbdefb;padding:16px 18px;border-radius:12px;margin-bottom:16px}
Â  Â  .chat{display:flex;flex-direction:column;height:60vh;min-height:420px;background:#fff;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden}
Â  Â  .messages{flex:1;overflow:auto;padding:16px}
Â  Â  .msg{margin-bottom:12px;max-width:85%}
Â  Â  .me{margin-left:auto;text-align:right}
Â  Â  .bubble{display:inline-block;padding:10px 12px;border-radius:12px;line-height:1.4}
Â  Â  .me .bubble{background:#e8f0fe}
Â  Â  .bot .bubble{background:#f1f5f9}
Â  Â  .inputbar{border-top:1px solid #e5e7eb;display:flex;gap:8px;padding:10px;background:#fafafa;align-items:center}
Â  Â  input[type="text"]{flex:1;padding:12px;border:1px solid #cfd8dc;border-radius:10px;font-size:15px}
Â  Â  input[type="file"]{display:none;}
Â  Â  .file-label{padding:12px 16px;border-radius:10px;background:#4caf50;color:#fff;font-weight:700;cursor:pointer}
Â  Â  button{padding:12px 16px;border:none;border-radius:10px;background:#1976d2;color:#fff;font-weight:700;cursor:pointer}
Â  Â  button:disabled{opacity:.6;cursor:not-allowed}
Â  Â  .footer{margin-top:10px;color:#607d8b;font-size:12px}
Â  Â  @media (max-width:480px){.chat{height:70vh}}
Â  </style>
</head>
<body>
Â  <header>Powernet Q&A ì±—ë´‡ (GitHub Pages)</header>
Â  <div class="container">
Â  Â  <div class="hero">
Â  Â  Â  <b>ì•ˆë‚´</b> â€” ì´ ë²„ì „ì€ íŒŒì¼ ì—…ë¡œë“œ ê¸°ëŠ¥ì„ ì§€ì›í•©ë‹ˆë‹¤. íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ì§ˆë¬¸í•˜ë©´ í•´ë‹¹ íŒŒì¼ì˜ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€í•©ë‹ˆë‹¤.
Â  Â  </div>

Â  Â  <div class="chat" id="chat">
Â  Â  Â  <div class="messages" id="messages"></div>
Â  Â  Â  <form class="inputbar" id="form">
Â  Â  Â  Â  <label for="file-input" class="file-label">íŒŒì¼ ì„ íƒ</label>
Â  Â  Â  Â  <input type="file" id="file-input" accept=".pdf,.doc,.docx,.txt">
Â  Â  Â  Â  <input id="q" type="text" placeholder="íŒŒì¼ê³¼ ê´€ë ¨ëœ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”." autocomplete="off" />
Â  Â  Â  Â  <button id="send" type="submit">ì „ì†¡</button>
Â  Â  Â  </form>
Â  Â  </div>

Â  Â  <div class="footer">
Â  Â  Â  Â© Powernet â€” ì´ UIëŠ” GitHub Pagesë¡œ í˜¸ìŠ¤íŒ…ë©ë‹ˆë‹¤. ë‹¤ìš°ì˜¤í”¼ìŠ¤ Link+/ëŒ€ì‹œë³´ë“œ iframeìœ¼ë¡œ ì†ì‰½ê²Œ ì„ë² ë“œ ê°€ëŠ¥.
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  const form = document.getElementById('form');
Â  Â  const q = document.getElementById('q');
Â  Â  const msgs = document.getElementById('messages');
Â  Â  const sendBtn = document.getElementById('send');
Â  Â  const fileInput = document.getElementById('file-input');

Â  Â  function addMessage(text, who='bot'){
Â  Â  Â  const wrap = document.createElement('div');
Â  Â  Â  wrap.className = 'msg ' + (who==='me'?'me':'bot');
Â  Â  Â  const b = document.createElement('div');
Â  Â  Â  b.className = 'bubble';
Â  Â  Â  b.textContent = text;
Â  Â  Â  wrap.appendChild(b);
Â  Â  Â  msgs.appendChild(wrap);
Â  Â  Â  msgs.scrollTop = msgs.scrollHeight;
Â  Â  }

Â  Â  addMessage('ì•ˆë…•í•˜ì„¸ìš”! íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ì§ˆë¬¸í•˜ì‹œë©´ í•´ë‹¹ ë¬¸ì„œì˜ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€í•´ ë“œë¦½ë‹ˆë‹¤.');

Â  Â  form.addEventListener('submit', async (e)=>{
Â  Â  Â  e.preventDefault();
Â  Â  Â  const text = q.value.trim();
Â  Â  Â  const file = fileInput.files[0];
Â  Â  Â  
Â  Â  Â  if(!text && !file) {
Â  Â  Â  Â  addMessage('ì§ˆë¬¸ì´ë‚˜ íŒŒì¼ì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”.', 'bot');
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  let displayMessage = text;
Â  Â  Â  if (file) {
Â  Â  Â  Â  displayMessage = `ğŸ“„ [${file.name}]ì™€(ê³¼) í•¨ê»˜ ì§ˆë¬¸: ${text}`;
Â  Â  Â  }
Â  Â  Â  addMessage(displayMessage,'me');
Â  Â  Â  q.value='';
Â  Â  Â  q.focus();

Â  Â  Â  // ë¡œë”© ìƒíƒœ í‘œì‹œ
Â  Â  Â  sendBtn.disabled = true;
Â  Â  Â  addMessage('ë‹µë³€ ìƒì„± ì¤‘...', 'bot');

Â  Â  Â  // FormData ê°ì²´ë¡œ íŒŒì¼ê³¼ ì§ˆë¬¸ì„ í•¨ê»˜ ì „ì†¡
Â  Â  Â  const formData = new FormData();
Â  Â  Â  formData.append('query', text);
Â  Â  Â  if (file) {
Â  Â  Â  Â  formData.append('file', file);
Â  Â  Â  }

Â  Â  Â  try {
Â  Â  Â  Â  const res = await fetch('/chat', {
Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  body: formData // Content-Type í—¤ë”ëŠ” FormData ì‚¬ìš© ì‹œ ìë™ìœ¼ë¡œ ì„¤ì •ë¨
Â  Â  Â  Â  });

Â  Â  Â  Â  if (!res.ok) {
Â  Â  Â  Â  Â  throw new Error(`HTTP error! status: ${res.status}`);
Â  Â  Â  Â  }

Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  
Â  Â  Â  Â  // "ë‹µë³€ ìƒì„± ì¤‘..." ë©”ì‹œì§€ ì œê±°
Â  Â  Â  Â  if (msgs.lastChild && msgs.lastChild.textContent.includes('ë‹µë³€ ìƒì„± ì¤‘')) {
Â  Â  Â  Â  Â  msgs.lastChild.remove();
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  addMessage(data.answer || 'ì£„ì†¡í•©ë‹ˆë‹¤. ë‹µë³€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
Â  Â  Â  } catch (error) {
Â  Â  Â  Â  console.error('API Error:', error);
Â  Â  Â  Â  if (msgs.lastChild && msgs.lastChild.textContent.includes('ë‹µë³€ ìƒì„± ì¤‘')) {
Â  Â  Â  Â  Â  msgs.lastChild.remove();
Â  Â  Â  Â  }
Â  Â  Â  Â  addMessage('ì£„ì†¡í•©ë‹ˆë‹¤. í˜„ì¬ ì±—ë´‡ ì„œë²„ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.');
Â  Â  Â  } finally {
Â  Â  Â  Â  sendBtn.disabled = false;
Â  Â  Â  }
Â  Â  });
Â  </script>
</body>
</html>
